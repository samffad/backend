define("common/alertPopover",function(){var e=_.template('<div class="popover fade top in <%=className%>"><div class="arrow"></div><div class="popover-content"><%=msg%></div></div>'),t=function(t,n,r){var o=$({}),i=$(e({msg:n,className:r?"alert":"alert-error"}));$(document.body).append(i);var a=t.offset();return i.css({left:a.left+"px",top:a.top-i.height()+"px"}),o.destroy=function(){i.remove()},i.show(),o};return window.alertPop=t,t}),define("common/validate",function(require){function e(e){return e.val()}function t(e){var t=e.attr("validateName")||"",n=r(e,t+"不能为空");e.one("click",function(){n.destroy()})}function n(e){for(var n=e.attr("validate").split(","),r=null;r=n.pop();)if(o[r]&&!o[r].call(o,e))return t(e),!1;return!0}var r=require("common/alertPopover"),o={notNull:function(t){var n=e(t);return n.trim()}},i=function(e){var t=$(e).find("[validate]"),r=t.length;if(r)for(var o=0;r>o;o++)if(!n(t.eq(o)))return!1;return!0};return window.validateForm=i,i}),define("common/joinURL",function(){return function(e,t){e||(e=location.href);var n=[];for(var r in t)r&&n.push(r+"="+encodeURIComponent(t[r]));return e.indexOf("?")<0&&(e+="?"),e+(e.indexOf("&")>=0?"&"+n.join("&"):n.join("&"))}}),define("common/formatDate",function(){return function(e,t){if(!_.isDate(e)||!e.getTime())return"";var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t}}),define("common/parseURL",function(){return function(e){for(var t=/^(?:([A-Za-z]+):(\/{0,3}))?([0-9.\-A-Za-z]+\.[0-9A-Za-z]+)?(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,n=["url","scheme","slash","host","port","path","query","hash"],r=t.exec(e),o={},i=0,a=n.length;a>i;i+=1)o[n[i]]=r[i]||"";return o}}),define("common/queryToJSON",function(){return function(e,t){if(!e)return{};for(var n=e.split("&"),r={},o=0,i=n.length;i>o;o++){var a=n[o].split("=");a[0]&&(r[a[0]]=a[1]?t?decodeURIComponent(a[1]):a[1]:"")}return r}}),define("common/common",function(require){require("common/validate"),$.joinURL=require("common/joinURL"),$.listener=$({}),$.formatDate=require("common/formatDate"),$.parseURL=require("common/parseURL"),$.queryToJson=require("common/queryToJSON"),$.parseTH=function(e){function t(e){for(var t=0,n=e.length;n>t;t++)if(_.isObject(e[t])&&e[t].item&&e[t].item.length>0)return!0;return!1}for(var n=["<tr>"],r=t(e),o="",i=0,a=e.length;a>i;i++){var u=e[i];n.push("<th"),_.isObject(u)&&u.item&&u.item.length>0?(o=u.category,n.push(' colspan="'+u.item.length+'"')):(r&&n.push(' rowspan="2"'),o=u),n.push(' thname="'+o+'" thindex="'+i+'"'),n.push(">"),n.push(o),n.push("</th>")}if(n.push("</tr>"),r){n.push("<tr>");for(var i=0,a=e.length;a>i;i++){var u=e[i];if(_.isObject(u)&&u.item&&u.item.length>0)for(var s=0,c=u.item.length;c>s;s++)n.push("<th>"),n.push(u.item[s]),n.push("</th>")}n.push("</tr>")}return n.join("")}}),require(["common/common"]);